<alfresco-config>



  <!-- Document Library config section -->
  <config evaluator="string-compare" condition="DocumentLibrary" replace="true">

    <!-- Used by the "Change Type" action Define valid subtypes using the following example: <type name="cm:content"> <subtype name="cm:mysubtype" /> </type> Remember to also add the relevant i18n string(s): type.cm_mysubtype=My SubType -->
    <types>
      <type name="cm:content">
        <subtype name="akdm:instruction" />
        <subtype name="akdm:ordinance" />
        <subtype name="akdm:manual" />
        <subtype name="akdm:protocol" />
        <subtype name="akdm:generaldocument" />
        <subtype name="akdm:economydocument" />
        <subtype name="akdm:byggredadocument" />
      </type>

      <type name="cm:folder">
        <subtype name="akdm:folder" />
      </type>
    </types>

    <create-content>
      <content id="instruction" label="type.akdm_instruction" type="pagelink" index="10" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:instruction
        </param>
      </content>
      <content id="ordinance" label="type.akdm_ordinance" type="pagelink" index="20" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:ordinance
        </param>
      </content>
      <content id="listpul" label="type.akdm_listpul" type="pagelink" index="30" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:listpul
        </param>
      </content>
      <content id="generaldocument" label="type.akdm_generaldocument" type="pagelink" index="40" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:generaldocument
        </param>
      </content>
      <content id="manual" label="type.akdm_manual" type="pagelink" index="50" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:manual
        </param>
      </content>
      <content id="internalvalidation" label="type.akdm_internalvalidation" type="pagelink" index="60" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:internalvalidation
        </param>
      </content>
      <content id="protocol" label="type.akdm_protocol" type="pagelink" index="70" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:protocol
        </param>
      </content>

      <content id="issuelist" label="type.akdm_issuelist" type="pagelink" index="80" icon="text">
        <param name="page">create-content?destination={nodeRef}&amp;itemId=akdm:issuelist
        </param>
      </content>


    </create-content>
  </config>


  <config replace="true" evaluator="string-compare" condition="AdvancedSearch">
    <advanced-search>
      <!-- Forms for the advanced search type list -->
      <forms>
        <!-- The 'form' config element contains the name of the model type of the form to display. The element supports the following optional attributes: id = form id, the id of "search" will be assumed if not set label = label text to display - defaults to model type if not set labelId = I18N message 
          id of label text to display description = description text to display descriptionId = I18N message id of description text to display -->
        <form labelId="search.form.akdm_instruction.title" descriptionId="search.form.akdm_instruction.desc">akdm:instruction</form>
        <form labelId="search.form.akdm_byggreda.title" descriptionId="search.form.akdm_byggreda.desc">akdm:byggredadocument
        </form>
        <form labelId="search.form.akdm_ordinance.title" descriptionId="search.form.akdm_ordinance.desc">
          akdm:ordinance
        </form>
        <form labelId="search.form.akdm_listpul.title" descriptionId="search.form.akdm_listpul.desc">akdm:listpul
        </form>
        <form labelId="search.form.akdm_generaldocument.title" descriptionId="search.form.akdm_generaldocument.desc">akdm:generaldocument</form>
        <form labelId="search.form.akdm_manual.title" descriptionId="search.form.akdm_manual.desc">akdm:manual
        </form>
        <form labelId="search.form.akdm_internalvalidation.title" descriptionId="search.form.akdm_internalvalidation.desc">akdm:internalvalidation</form>
        <form labelId="search.form.akdm_protocol.title" descriptionId="search.form.akdm_protocol.desc">akdm:protocol
        </form>
        <form labelId="search.form.akdm_issuelist.title" descriptionId="search.form.akdm_issuelist.desc">
          akdm:issuelist
        </form>
        <form labelId="search.form.akdm_document.title" descriptionId="search.form.akdm_document.desc">
          akdm:document
        </form>
        <form labelId="search.form.label.cm_folder" descriptionId="search.form.desc.cm_folder">cm:folder
        </form>
      </forms>
    </advanced-search>
  </config>

  <config evaluator="string-compare" condition="Workflow">
    <hidden-workflows>
      <workflow name="activiti$activitiAdhoc" />
      <workflow name="activiti$activitiReview" />
      <workflow name="activiti$activitiReviewPooled" />
      <workflow name="activiti$activitiParallelReview" />
      <workflow name="activiti$activitiParallelGroupReview" />
    </hidden-workflows>
  </config>

  <config evaluator="string-compare" condition="DocLibCustom">
    <dependencies>
      <js src="ak/components/workflow/complete-document-actions.js" />
    </dependencies>
  </config>

  <!-- Document Library Actions config section -->
  <config evaluator="string-compare" condition="DocLibActions">

    <!-- Action definitions -->
    <actions>
      <!-- AlingsÃ¥s definitions -->
      <!-- Complete document workflow -->
      <action id="document-wf-completeDocument" type="javascript" label="actions.document.complete-document" icon="document-approve">
        <param name="function">onActionCompleteDocumentAction</param>
        <param name="workflow">activiti$completeDocument</param>
        <permissions>
          <permission allow="true">Write</permission>
        </permissions>
        <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
        <evaluator negate="true">se.alingsas.evaluator.doclib.action.DocumentStatusIsComplete</evaluator>
        <evaluator>se.alingsas.evaluator.doclib.action.IsAlingsasDocument</evaluator>
        <evaluator negate="true">evaluator.doclib.action.isWorkingCopy</evaluator>
      </action>

      <!-- Revert document workflow -->
      <action id="document-wf-revertDocument" type="pagelink" label="actions.document.revert-document" icon="document-reject">
        <param name="page">start-workflow?selectedItems={node.nodeRef}&amp;startWorkflow=activiti$revertDocument</param>
        <permissions>
          <permission allow="true">Write</permission>
        </permissions>
        <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
        <evaluator>se.alingsas.evaluator.doclib.action.DocumentStatusIsComplete</evaluator>
        <evaluator>se.alingsas.evaluator.doclib.action.IsAlingsasDocument</evaluator>
        <evaluator negate="true">evaluator.doclib.action.isWorkingCopy</evaluator>
      </action>

      <!-- Download document locked -->
      <action id="document-download-locked" type="link" icon="document-download" label="actions.document.download-locked">
        <param name="href">{downloadUrl}</param>
        <evaluator>evaluator.doclib.action.editableByCurrentUser</evaluator>
        <evaluator>evaluator.doclib.action.isWorkingCopy</evaluator>
      </action>

      <!-- Download document read-only -->
      <action id="document-download" type="link" icon="document-download" label="actions.document.download">
        <param name="href">{downloadUrl}</param>
        <evaluator>evaluator.doclib.action.editableByCurrentUser</evaluator>
        <evaluator negate="true">evaluator.doclib.action.isWorkingCopy</evaluator>
      </action>

      <action id="document-mail-to" type="link" label="ak.actions.mail-to" icon="document-publish">
        <param name="href">{mailtoLink}</param>
      </action>
    </actions>


    <!-- Action Group definitions -->
    <actionGroups>
      <actionGroup id="empty" />

      <actionGroup id="document-browse">
        <action index="100" id="document-change-type" />
        <action index="100" id="document-download-locked" />
        <action index="100" id="document-download" />
        <action index="370" id="document-wf-completeDocument" />
        <action index="405" id="document-wf-revertDocument" />
        <action index="410" id="document-mail-to" />
      </actionGroup>

      <actionGroup id="document-details">
        <action index="100" id="document-change-type" />
        <action index="100" id="document-download-locked" />
        <action index="100" id="document-download" />
        <action index="400" id="document-wf-completeDocument" />
        <action index="405" id="document-wf-revertDocument" />
        <action index="410" id="document-mail-to" />
      </actionGroup>

    </actionGroups>
  </config>
</alfresco-config>