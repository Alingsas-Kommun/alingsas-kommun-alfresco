<alfresco-config>
	<config evaluator="string-compare" condition="activiti$completeDocument">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:workflowDescription" />
					<show id="packageItems" />
					<hide id="bpm:comment" />
					<hide id="bpm:sendEMailNotifications" />
					<show id="akwf:targetSite" />
					<show id="akwf:targetFolder" />
				</field-visibility>
				<appearance>
					<set id="" appearance="title" label-id="workflow.akwf.set.general" />
					<set id="info" appearance=""
						template="/org/alfresco/components/form/2-column-set.ftl" />
					<set id="target" appearance="title" label-id="workflow.akwf.set.target" />
					<set id="items" appearance="title" label-id="workflow.akwf.set.items" />					
					<set id="other" appearance="title" label-id="workflow.akwf.set.other" />
					<set id="response" appearance="title" label-id="workflow.akwf.set.response" />

					<field id="bpm:workflowDescription" label-id="workflow.akwf.field.message" mandatory="true">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="style">width: 95%</control-param>
						</control>
					</field>

					<field id="akwf:targetSite" set="target" mandatory="true"
						label-id="workflow.akwf.field.targetSite">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="startLocation">{siteshome}</control-param>
							<control-param name="rootNode">{siteshome}</control-param>
							<control-param name="selectActionLabelId">workflow.akwf.form.control.button.select-target-site</control-param>
						</control>
					</field>
					<field id="akwf:targetFolder" set="target" mandatory="true"
						label-id="workflow.akwf.field.targetFolder">
						<control template="/se/alingsas/alfresco/share/components/form/controls/association-based-on-field.ftl">
							<control-param name="basedOnField">assoc_akwf_targetSite</control-param>
							<control-param name="selectActionLabelId">workflow.akwf.form.control.button.select-target-folder</control-param>
							<control-param name="selectActionFailedBasedOnFieldLabelId">workflow.akwf.form.control.button.select-target-folder-fail-site</control-param>
						</control>
					</field>

					<field id="packageItems" set="items" mandatory="true">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="showTargetLink">true</control-param>
							<control-param name="displayMode">list</control-param>
							<control-param name="startLocation">{userhome}</control-param>
							<control-param name="compactMode">true</control-param>	
							<control-param name="selectActionLabelId">workflow.akwf.form.control.button.select-source-file</control-param>						
						</control>
					</field>
					
					<field id="bpm:sendEMailNotifications" label-id="workflow.akwf.field.send-email-notifications" set="other">
						<control
							template="/org/alfresco/components/form/controls/workflow/email-notification.ftl" />
					</field>

					<field id="bpm:comment" label-id="workflow.akwf.field.comment"
						set="response">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>
 
	<config evaluator="task-type" condition="akwf:completeDocumentReviewDocumentTask">
		<forms>
			<form>
				<field-visibility>
					<show id="message" />
					<show id="bpm:dueDate" />
					<show id="bpm:priority" />
					<show id="akwf:workDescription" />
					<show id="packageItems" />
					<show id="bpm:comment" />
					<show id="akwf:targetSite" />
					<show id="akwf:targetFolder" />
					<show id="akwf:reviewOutcome" />
				</field-visibility>
				<appearance>
					<set id="" appearance="title" label-id="workflow.set.general" />
					<set id="info" appearance=""
						template="/org/alfresco/components/form/2-column-set.ftl" />
					<set id="target" appearance="title" label-id="workflow.set.target" />
					<set id="items" appearance="title" label-id="workflow.set.items" />
					<set id="work" appearance="title" label-id="workflow.set.work" />
					<set id="other" appearance="title" label-id="workflow.set.other" />
					<set id="response" appearance="title" label-id="workflow.set.response" />


					<field id="message" label-id="workflow.field.message">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>

					<field id="bpm:priority" label-id="workflow.field.priority"
						set="info" read-only="true">
						<control
							template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
					</field>
					<field id="bpm:dueDate" set="info" label-id="workflow.field.due">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>

					<field id="packageItems" set="items" />

					<field id="akwf:workDescription" set="work">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>

					<field id="bpm:comment" label-id="workflow.field.comment"
						set="response">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>

					<field id="akwf:reviewOutcome" label-id="workflow.field.outcome" set="response">
	                  <control template="/org/alfresco/components/form/controls/workflow/activiti-transitions.ftl" />
	               </field>
					
					<field id="akwf:targetSite" set="target" mandatory="true"
						label-id="workflow.field.targetSite" disabled="true">
						<control template="/se/alingsas/alfresco/share/components/form/controls/association-based-on-field.ftl">
							<control-param name="disabled">true</control-param>
							<control-param name="startLocation">{siteshome}</control-param>
							<control-param name="rootNode">{siteshome}</control-param>
							<control-param name="selectActionLabelId">form.control.button.select-target-site</control-param>
						</control>
					</field>
					<field id="akwf:targetFolder" set="target" mandatory="true"
						label-id="workflow.field.targetFolder">
						<control template="/se/alingsas/alfresco/share/components/form/controls/association-based-on-field.ftl">							
							<control-param name="basedOnField">assoc_akwf_targetSite</control-param>
							<control-param name="selectActionLabelId">form.control.button.select-target-folder</control-param>
							<control-param name="selectActionFailedBasedOnFieldLabelId">form.control.button.select-target-folder-fail-site</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

</alfresco-config>